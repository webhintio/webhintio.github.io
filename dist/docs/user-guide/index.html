<!doctype html><html lang="en"><head><meta charset="utf-8"><title>User guide</title><meta name="description" content="sonar website"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#4046dd"><link rel="manifest" href="/site.webmanifest"><link rel="apple-touch-icon" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"><link rel="stylesheet" href="/core/css/base.css"><link rel="stylesheet" href="/core/css/color.css"><link rel="stylesheet" href="/core/css/footer.css"><link rel="stylesheet" href="/core/css/helpers.css"><link rel="stylesheet" href="/core/css/layouts.css"><link rel="stylesheet" href="/core/css/navigation.css"><link rel="stylesheet" href="/core/css/search-results.css"><link rel="stylesheet" href="/core/css/structure.css"><link rel="stylesheet" href="/core/css/type.css"><link rel="stylesheet" href="/core/css/highlight.css"><link rel="stylesheet" href="/components/breadcrumb/breadcrumb.css"><link rel="stylesheet" href="/core/css/controls.css"><link rel="stylesheet" href="/core/css/code.css"><link rel="stylesheet" href="/core/css/table-of-contents.css"><link rel="stylesheet" href="/core/css/tables-lists.css"><link rel="stylesheet" href="/components/treeview/treeview.css"><link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,500,600" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body><header class="header"><div class="nav-bar container"><nav class="nav"><a href="/" class="clear logo--container"><img src="/images/sonar-logo.svg" alt="sonar" class="header__logo navbar__navitem"></a><ul class="nav__navbar"><li class="navbar__navitem"><a role="button" href="/" id="docs" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-docs" class="navitem__button expandable">Documentation</a><ul role="group" id="submenu-docs" class="navbar__submenu" aria-hidden="true"><li><a href="/docs/developer-guide/">Developer Guide</a></li><li><a href="/docs/user-guide/rules/">Rules</a></li><li><a href="/docs/user-guide/">User Guide</a></li></ul></li><li class="navbar__navitem"><a role="button" href="/" id="about" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-about" class="navitem__button expandable">About</a><ul role="group" id="submenu-about" class="navbar__submenu" aria-hidden="true"><li><a href="/about/faq.html">FAQ</a></li><li><a href="/about/changelog.html">Changelog</a></li><li><a href="/about/governance.html">Governance</a></li><li><a href="/about/contributors.html">Contributors</a></li><li><a href="/about/code_of_conduct.html">Code of Conduct</a></li></ul></li></ul><div class="nav-bar__input"><label for="search-input" class="visually-hidden">Search the documentation</label><input type="search" id="search-input" placeholder="Search…" aria-label="Search"></div></nav><button class="header__toggle mobile-nav-button" aria-label="Menu"></button></div></header><main class="container"><article class="content" aria-labelledby="page-heading"><nav class="container breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/">Home</a></li><li><a href="../">Documentation</a></li><li aria-current="location">User guide</li></ul></nav><header class="page-intro"><h1 id="page-heading">User guide</h1></header><section class="section"><div class="layout layout--sidebar"><div class="module module--primary wrap-text"><h1 id="userguide"><a href="#userguide" class="headerlink" title="User guide"></a>User guide</h1><h2 id="gettingstarted"><a href="#gettingstarted" class="headerlink" title="Getting started"></a>Getting started</h2><p>Getting started with <code>sonar</code>‘s CLI is really easy. First you need to have <a href="https://nodejs.org/en/download/current/" target="_blank" rel="external">node 8.x</a> installed and then run:</p><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">npm install -g @sonarwhal/sonar</div></pre></td></tr></table></figure><p>You can also install it as a <code>devDependency</code> if you prefer not to have it globally.</p><p>The next thing that <code>sonar</code> needs is a <code>.sonarrc</code> file. The fastest and easiest way to create one is by using the flag <code>--init</code>:</p><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">sonar --init</div></pre></td></tr></table></figure><p>This command will start a wizard that will ask you a series of questions (e.g.: what collector to use, what formatter, which rules, etc.). Answer them and you will end up with something similar to the following:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"collector"</span>: &#123;</div><div class="line">        <span class="attr">"name"</span>: <span class="string">"collectorName"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"formatter"</span>: <span class="string">"formatterName"</span>,</div><div class="line">    <span class="attr">"rules"</span>: &#123;</div><div class="line">        <span class="attr">"rule1"</span>: <span class="string">"error"</span>,</div><div class="line">        <span class="attr">"rule2"</span>: <span class="string">"error"</span>,</div><div class="line">        <span class="attr">"rule3"</span>: <span class="string">"error"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"rulesTimeout"</span>: <span class="number">120000</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Then you just have to run the following command to scan a website:</p><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">sonar https://example.com</div></pre></td></tr></table></figure><p>Wait a few seconds and you will get the results. It might take a while to get some of the results. Some of the rules can take a few minutes to report the results (e.g.: <a href="./rules/ssllabs.html"><code>SSL Labs</code></a>).</p><p>Now that you have your first result, is time to learn a bit more about the different pieces:</p><ul><li><a href="#rules">Rules</a></li><li><a href="#collectors">Collectors</a></li><li><a href="#formatters">Formatters</a></li></ul><h2 id="rules"><a href="#rules" class="headerlink" title="Rules"></a>Rules</h2><p>A <code>rule</code> is a test that your website needs to pass. <code>sonar</code> comes with a few <a href="./rules/">built in ones</a>, but you can easily create your own or download them from <code>npm</code>. You can read more about <a href="../developer-guide/rules/index.html">how to create rules in the developer guide</a>.</p><h3 id="ruleconfiguration"><a href="#ruleconfiguration" class="headerlink" title="Rule configuration"></a>Rule configuration</h3><p>When using sonar, you are always in control. This means that you can decide what rules are relevant to your use case and what severity a rule should have:</p><ul><li><code>off</code>: The rule will not be executed. This is the same as not having the rule under the <code>rules</code> section of a <code>.sonarrc</code> file.</li><li><code>warning</code>: The rule will be executed but it will not change the exit status code if an issue is found.</li><li><code>error</code>: The rule will be executed and will change the exit status code to <code>1</code> if an issue is found.</li></ul><p>Additionally, some rules allow further customization. The configuration in that case it will be similar to the following:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">"rules": &#123;</div><div class="line">    "rule1": ["severity", &#123;</div><div class="line">        "customization1": "value1",</div><div class="line">        "customization2": "value2"</div><div class="line">    &#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>You can check which rules accept this kind of configuration by visiting the <a href="./rules/">rules documentation</a>.</p><p>Sometimes you don’t have control over all the infrastructure and there is nothing you can do about it. Reporting errors in those cases just generates noise and frustration. Instead of globally disabling a rule you might just want to turn it off for a domain, or directly ignore completely one (like a third party analytics, ads, etc.). To achieve this you need to add the <code>ignoredUrls</code> property to your <code>.sonarrc</code> file:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">"ignoredUrls": &#123;</div><div class="line">    ".*\\.domain1\\.com/.*": ["*"],</div><div class="line">    "www.domain2.net": ["disallowed-headers"]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Properties can be:</p><ul><li>regular expressions, like <code>.*\\.domain1\\.com/.*</code>. This will match:<ul><li><code>something.domain1.com/index.html</code></li><li><code>somethingelse.domain1.com/image.png</code></li></ul></li><li>some text, like <code>www.domain2.net</code>. In this case, if the resource URL contains the text, it will be a match. E.g.:<ul><li><code>www.domain2.net/index.php</code></li><li><code>www.domain2.net/image.png</code></li></ul></li></ul><p>The value of the property has to be an array of strings where the strings can be:</p><ul><li><code>*</code> if you want to ignore all rules for the given domain.</li><li>The ID of the rule to be ignored.</li></ul><p>In the previous example we will:</p><ul><li>Ignore all rules for any resource that matches the regex <code>.*\\.domain1\\.com/.*</code>.</li><li>Ignore the rule <code>disallowed-headers</code> for the domain <code>www.domain2.net</code>.</li></ul><h3 id="rulestimeout"><a href="#rulestimeout" class="headerlink" title="Rules timeout"></a>Rules timeout</h3><p>Even though rules are executed in parallel, sometimes one can take too long and prevent <code>sonar</code> to finish (e.g.: when using an external service, long script execution, etc.).</p><p>To prevent this situation, each rule needs to finish in under 2 minutes. You can modify this threshold by using the property <code>rulesTimeout</code> in your <code>.sonarrc</code> file.</p><h2 id="browserconfiguration"><a href="#browserconfiguration" class="headerlink" title="Browser configuration"></a>Browser configuration</h2><p>sonar allows you to define your browser support matrix by adding the property <code>browserlist</code> to your <code>.sonarrc</code> file. This property follows the same convention as <a href="https://github.com/ai/browserslist" target="_blank" rel="external"><code>browserlist</code></a>:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"browserslist"</span>: [</div><div class="line">    <span class="string">"&gt; 1%"</span>,</div><div class="line">    <span class="string">"last 2 versions"</span></div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>By specifying this property, you are giving more information to the rules and they might decide to adapt their behavior. An example of a rule taking advantageSome of this property is <a href="./rules/highest-available-document-mode.html"><code>highest-available-document-mode</code></a>. This rule will advice you to use <code>edge</code> mode if you need to support versions of IE prior IE10, or tell you to remove that tag or header it you only need IE11+ because document modes were removed at that version.</p><h2 id="collectors"><a href="#collectors" class="headerlink" title="Collectors"></a>Collectors</h2><p>A <code>collector</code> is the interface between the <code>rule</code>s and the website you are testing.</p><p>To configure a collector you need to update your <code>.sonarrc</code> file to make it look like the following:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"collector"</span>: &#123;</div><div class="line">        <span class="attr">"name"</span>: <span class="string">"collectorName"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Where <code>collectorName</code> is the name of the collector.</p><p><code>collector</code>s can be configured as well. Maybe you want to do request with another <code>userAgent</code>, change some of the other defaults, etc. To do that, you just have to add a property <code>options</code> to your <code>collector</code> property with the values you want to modify:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">"collector": &#123;</div><div class="line">    "name": "collectorName",</div><div class="line">    "options": &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>The <a href="./collectors/index.html"><code>collector</code>s documentation</a> has more information of what can be configured in each one.</p><h2 id="formatters"><a href="#formatters" class="headerlink" title="Formatters"></a>Formatters</h2><p>A <code>formatter</code> takes the results of executing all the rules and transforms them to be consumed by the user. A <code>formatter</code> can output the results via the <code>console</code> in different formats, a <code>JSON</code> file, <code>XML</code>, etc.</p><p>Please see <a href="./formatters/index.html">the current list of supported <code>formatter</code>s</a> to know more.</p></div><div class="module module--secondary table-of-contents treeview" role="navigation"><ul role="tree" aria-labelledby="page-heading" tabindex="0"><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class="toc-section-title"><span class="text">collectors</span> <span class="icon"></span></div><ul role="group"><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/collectors/index.html" tabindex="-1">Collectors</a></div></li></ul></li><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class="toc-section-title"><span class="text">formatters</span> <span class="icon"></span></div><ul role="group"><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/formatters/index.html" tabindex="-1">List of official formatters</a></div></li></ul></li><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class="toc-section-title"><span class="text">rules</span> <span class="icon"></span></div><ul role="group"><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/index.html" tabindex="-1">Rules categories</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/axe.html" tabindex="-1">Accessibility assesment with aXe</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/disallowed-headers.html" tabindex="-1">Disallow certain HTTP headers</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/manifest-file-extension.html" tabindex="-1">Disallow non-standard file extension for the web app manifest file</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/no-protocol-relative-urls.html" tabindex="-1">Disallow protocol-relative URLs</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/no-friendly-error-pages.html" tabindex="-1">Disallow small error pages</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/no-html-only-headers.html" tabindex="-1">Disallow unneeded HTTP headers for non-HTML resources</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/content-type.html" tabindex="-1">Require &#x60;Content-Type&#x60; HTTP response header with appropriate value</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/x-content-type-options.html" tabindex="-1">Require &#x60;X-Content-Type-Options&#x60; HTTP response header</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/manifest-exists.html" tabindex="-1">Require a web app manifest file</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/meta-charset-utf-8.html" tabindex="-1">Require charset meta tag with the value of &#x60;utf-8&#x60;</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/disown-opener.html" tabindex="-1">Require external links to disown opener</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/highest-available-document-mode.html" tabindex="-1">Require highest available document mode</a></div></li><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/user-guide/rules/ssllabs.html" tabindex="-1">SSL Server Test</a></div></li></ul></li></ul></div></div></section></article></main><footer class="footer footer--home"><div class="footer-nav container"><div class="footer-nav__item"><p class="category">Documentation</p><ul><li><a href="/docs/developer-guide/">Developer Guide</a></li><li><a href="/docs/user-guide/rules/">Rules</a></li><li><a href="/docs/user-guide/">User Guide</a></li></ul></div><div class="footer-nav__item"><p class="category">About</p><ul><li><a href="/about/faq.html">FAQ</a></li><li><a href="/about/changelog.html">Changelog</a></li><li><a href="/about/governance.html">Governance</a></li><li><a href="/about/contributors.html">Contributors</a></li><li><a href="/about/code_of_conduct.html">Code of Conduct</a></li></ul></div><ul class="footer-nav__item social-list"><li class="github-icon"><a href="https://github.com/sonarwhal" aria-label="Follow Sonar on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path class="github-icon-svg" d="M12.5.4C5.7.4.2 5.9.2 12.7c0 5.4 3.5 10 8.4 11.7.6.1.8-.3.8-.6v-2.1C6 22.4 5.3 20 5.3 20c-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.6-1.4-5.6-6.1 0-1.3.5-2.4 1.3-3.3-.2-.4-.6-1.6 0-3.3 0 0 1-.3 3.4 1.3 1-.3 2-.4 3.1-.4 1 0 2.1.1 3.1.4C17.9 5.2 19 5.5 19 5.5c.7 1.7.2 2.9.1 3.3.8.9 1.3 2 1.3 3.3 0 4.7-2.9 5.8-5.6 6.1.4.4.8 1.1.8 2.3v3.4c0 .3.2.7.8.6 4.9-1.6 8.4-6.2 8.4-11.7C24.8 5.9 19.3.4 12.5.4"/></svg></a></li><li class="twitter-icon"><a href="https://twitter.com/narwhalnellie" aria-label="Follow Sonar on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 24"><path class="twitter-icon-svg" d="M25 4.4c-.9.4-1.9.7-2.9.8 1-.6 1.8-1.6 2.2-2.8-1 .6-2.1 1-3.2 1.2-.9-1-2.2-1.6-3.7-1.6-2.8 0-5 2.3-5 5 0 .4 0 .8.1 1.2C8.3 8 4.6 6 2.1 2.9c-.4.8-.7 1.6-.7 2.6 0 1.8.9 3.3 2.2 4.2-.8-.1-1.5-.3-2.2-.7v.1c0 2.4 1.7 4.5 4.1 5-.4.1-.9.2-1.3.2-.3 0-.6 0-.9-.1.6 2 2.5 3.5 4.7 3.5-1.9 1.3-4 2.1-6.4 2.1-.4 0-.8 0-1.2-.1C2.6 21.2 5.3 22 8.1 22c9.3 0 14.4-7.7 14.4-14.4v-.7c1-.6 1.8-1.5 2.5-2.5"/></svg></a></li></ul></div></footer><script src="/js/nav.js"></script><script src="/core/scripts/form-validation.js"></script><script src="/components/accordion/accordion.js"></script><script src="/components/treeview/treeview.js"></script><script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({apiKey:"2ee58f908e6d720c4f72a9645ce0e857",indexName:"sonarwhal",inputSelector:"#search-input",appId:"0R8E5SPAFP",debug:!1})</script><script>!function(e,t,a,c,n){e.GoogleAnalyticsObject=a,e[a]||(e[a]=function(){(e[a].q=e[a].q||[]).push(arguments)}),e[a].l=+new Date,c=t.createElement("script"),n=t.scripts[0],c.src="https://www.google-analytics.com/analytics.js",n.parentNode.insertBefore(c,n)}(this,document,"ga"),ga("create","UA-101540923-1"),ga("send","pageview")</script></body></html>