<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Events</title><meta name="description" content="sonar website"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#4046dd"><link rel="manifest" href="/site.webmanifest"><link rel="apple-touch-icon" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"><link rel="stylesheet" href="/core/css/base.css"><link rel="stylesheet" href="/core/css/color.css"><link rel="stylesheet" href="/core/css/footer.css"><link rel="stylesheet" href="/core/css/helpers.css"><link rel="stylesheet" href="/core/css/layouts.css"><link rel="stylesheet" href="/core/css/navigation.css"><link rel="stylesheet" href="/core/css/search-results.css"><link rel="stylesheet" href="/core/css/structure.css"><link rel="stylesheet" href="/core/css/type.css"><link rel="stylesheet" href="/core/css/highlight.css"><link rel="stylesheet" href="/components/breadcrumb/breadcrumb.css"><link rel="stylesheet" href="/core/css/controls.css"><link rel="stylesheet" href="/core/css/code.css"><link rel="stylesheet" href="/core/css/table-of-contents.css"><link rel="stylesheet" href="/core/css/tables-lists.css"><link rel="stylesheet" href="/components/treeview/treeview.css"><link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,500,600" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body><header class="header"><div class="nav-bar container"><nav class="nav"><a href="/" class="clear logo--container"><img src="/images/sonar-logo.svg" alt="sonar" class="header__logo navbar__navitem"></a><ul class="nav__navbar"><li class="navbar__navitem"><a role="button" href="/" id="docs" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-docs" class="navitem__button expandable">Documentation</a><ul role="group" id="submenu-docs" class="navbar__submenu" aria-hidden="true"><li><a href="/docs/developer-guide/">Developer Guide</a></li><li><a href="/docs/user-guide/rules/">Rules</a></li><li><a href="/docs/user-guide/">User Guide</a></li></ul></li><li class="navbar__navitem"><a role="button" href="/" id="about" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-about" class="navitem__button expandable">About</a><ul role="group" id="submenu-about" class="navbar__submenu" aria-hidden="true"><li><a href="/about/faq.html">FAQ</a></li><li><a href="/about/changelog.html">Changelog</a></li><li><a href="/about/governance.html">Governance</a></li><li><a href="/about/contributors.html">Contributors</a></li><li><a href="/about/code_of_conduct.html">Code of Conduct</a></li></ul></li></ul><div class="nav-bar__input"><label for="search-input" class="visually-hidden">Search the documentation</label><input type="search" id="search-input" placeholder="Search…" aria-label="Search"></div></nav><button class="header__toggle mobile-nav-button" aria-label="Menu"></button></div></header><main class="container"><article class="content" aria-labelledby="page-heading"><nav class="container breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/">Home</a></li><li><a href="../../">Documentation</a></li><li><a href="../">Developer guide</a></li><li aria-current="location">Events</li></ul></nav><header class="page-intro"><h1 id="page-heading">Events</h1></header><section class="section"><div class="layout layout--sidebar"><div class="module module--primary wrap-text"><h1 id="events"><a href="#events" class="headerlink" title="Events"></a>Events</h1><p><code>collector</code>s communicate via events. The following is a list of all the events common to all <code>collector</code>s, with their signature, and the <code>interface</code> they implement.</p><ul><li><a href="#elementelement-type"><code>element::&lt;element-type&gt;</code></a></li><li><a href="#fetchend"><code>fetch::end</code></a></li><li><a href="#fetcherror"><code>fetch::error</code></a></li><li><a href="#fetchstart"><code>fetch::start</code></a></li><li><a href="#manifestfetchend"><code>manifestfetch::end</code></a></li><li><a href="#manifestfetcherror"><code>manifestfetch::error</code></a></li><li><a href="#manifestfetchstart"><code>manifestfetch::start</code></a></li><li><a href="#scanend"><code>scan::end</code></a></li><li><a href="#scanstart"><code>scan::start</code></a></li><li><a href="#targetfetchend"><code>targetfetch::end</code></a></li><li><a href="#targetfetcherror"><code>targetfetch::error</code></a></li><li><a href="#targetfetchstart"><code>targetfetch::start</code></a></li><li><a href="#traversedown"><code>traverse::down</code></a></li><li><a href="#traverseend"><code>traverse::end</code></a></li><li><a href="#traversestart"><code>traverse::start</code></a></li><li><a href="#traverseup"><code>traverse::up</code></a></li></ul><h2 id="elementelement-type"><a href="#elementelement-type" class="headerlink" title="element::&lt;element-type&gt;"></a><code>element::&lt;element-type&gt;</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> visits an element in the DOM when traversing it. <code>&lt;element-type&gt;</code> is the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName" target="_blank" rel="external"><code>nodeName</code></a> lower cased.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IElementFound &#123;</div><div class="line">    <span class="comment">/** The URI of the resource firing this event. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">    <span class="comment">/** The visited element. */</span></div><div class="line">    element: IAsyncHTMLElement;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="fetchend"><a href="#fetchend" class="headerlink" title="fetch::end"></a><code>fetch::end</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has finished downloading the content of a <code>resource</code> (<code>js</code>, <code>css</code>, <code>image</code>, etc.).</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IFetchEnd &#123;</div><div class="line">    <span class="comment">/** The element that initiated the request. */</span></div><div class="line">    element: IAsyncHTMLElement;</div><div class="line">    <span class="comment">/** The URL of the target */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">    <span class="comment">/** The request made to fetch the target. */</span></div><div class="line">    request: IRequest;</div><div class="line">    <span class="comment">/** The response sent while fetching the target. */</span></div><div class="line">    response: IResponse;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note:</strong> The event is the same for <a href="#targetfetchend"><code>targetfetch::end</code></a>.</p><h2 id="fetcherror"><a href="#fetcherror" class="headerlink" title="fetch::error"></a><code>fetch::error</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has encountered a problem downloading the content of a <code>resource</code>.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IFetchError &#123;</div><div class="line">    <span class="comment">/** The URL of the target. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">    <span class="comment">/** The element that initiated the request. */</span></div><div class="line">    element: IAsyncHTMLElement;</div><div class="line">    <span class="comment">/** The error found. */</span></div><div class="line">    error: <span class="built_in">any</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note:</strong> The event is the same for <a href="#targetfetcherror"><code>targetfetch::error</code></a>.</p><h2 id="fetchstart"><a href="#fetchstart" class="headerlink" title="fetch::start"></a><code>fetch::start</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> is about to start the request to fetch the <code>target</code>.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IFetchStart &#123;</div><div class="line">    <span class="comment">/** The URL to download */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note:</strong> The event is the same for <a href="#targetfetchstart"><code>targetfetch::start</code></a>.</p><h2 id="manifestfetchend"><a href="#manifestfetchend" class="headerlink" title="manifestfetch::end"></a><code>manifestfetch::end</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has finished downloading the web manifest of a page.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IFetchEndEvent &#123;</div><div class="line">    <span class="comment">/** The element that initiated the request. */</span></div><div class="line">    element: IAsyncHTMLElement;</div><div class="line">    <span class="comment">/** The URL of the target */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">    <span class="comment">/** The request made to fetch the target. */</span></div><div class="line">    request: IRequest;</div><div class="line">    <span class="comment">/** The response sent while fetching the target. */</span></div><div class="line">    response: IResponse;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note:</strong> The event is the same for <a href="#targetfetchend"><code>targetfetch::end</code></a>.</p><h2 id="manifestfetcherror"><a href="#manifestfetcherror" class="headerlink" title="manifestfetch::error"></a><code>manifestfetch::error</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has encountered a problem downloading the web manifest.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IFetchErrorEvent &#123;</div><div class="line">    <span class="comment">/** The URL of the target. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">    <span class="comment">/** The error found. */</span></div><div class="line">    error: <span class="built_in">any</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note:</strong> The event is the same for <a href="#targetfetcherror"><code>targetfetch::error</code></a>.</p><h2 id="manifestfetchmissing"><a href="#manifestfetchmissing" class="headerlink" title="manifestfetch::missing"></a><code>manifestfetch::missing</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> hasn’t found any manifest to download.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IManifestFetchMissingEvent &#123;</div><div class="line">    <span class="comment">/** The URL to download */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note:</strong> The event is the same for <a href="#targetfetchstart"><code>targetfetch::start</code></a>.</p><h2 id="scanend"><a href="#scanend" class="headerlink" title="scan::end"></a><code>scan::end</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has finished sending all events and its about to return. This is the last event to be emitted.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IScanEnd &#123;</div><div class="line">     <span class="comment">/** The final URL analyzed. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="scanstart"><a href="#scanstart" class="headerlink" title="scan::start"></a><code>scan::start</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> is about to start the analysis. This is the first event to be emitted.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IScanStart &#123;</div><div class="line">    <span class="comment">/** The URL to analyze. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note:</strong> This event is fired synchronously. You should not return a <code>Promise</code> because it will not wait for it to be resolved. If you need to perform an <code>async</code> operation you should combine it with <code>scan::end</code>. You can find more information in <a href="../rules/index.html#interact-with-other-services">how to interact with other services</a>.</p><h2 id="targetfetchend"><a href="#targetfetchend" class="headerlink" title="targetfetch::end"></a><code>targetfetch::end</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has finished downloading the <code>target</code>.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IFetchEnd &#123;</div><div class="line">    <span class="comment">/** The element that initiated the request. */</span></div><div class="line">    element: IAsyncHTMLElement;</div><div class="line">    <span class="comment">/** The URL of the target. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">    <span class="comment">/** The request made to fetch the target. */</span></div><div class="line">    request: IRequest;</div><div class="line">    <span class="comment">/** The response sent while fetching the target. */</span></div><div class="line">    response: IResponse;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note:</strong> The event is the same for <a href="#fetchend"><code>fetch::end</code></a>. In this case <code>element</code> will be <code>null</code>.</p><h2 id="targetfetcherror"><a href="#targetfetcherror" class="headerlink" title="targetfetch::error"></a><code>targetfetch::error</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has encountered a problem downloading the <code>target</code>.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IFetchError &#123;</div><div class="line">    <span class="comment">/** The URL of the target. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">    <span class="comment">/** The element that initiated the request. */</span></div><div class="line">    element: IAsyncHTMLElement;</div><div class="line">    <span class="comment">/** The error found. */</span></div><div class="line">    error: <span class="built_in">any</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note::</strong> The event is the same for <a href="#fetcherror"><code>fetch::error</code></a>. In this case <code>element</code> will be <code>null</code>.</p><h2 id="targetfetchstart"><a href="#targetfetchstart" class="headerlink" title="targetfetch::start"></a><code>targetfetch::start</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> is about to start the request to fetch the <code>target</code>. Redirects are followed if needed.</p><p><strong>Format:</strong></p><figure class="highlight typescript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IFetchStart &#123;</div><div class="line">    <span class="comment">/** The URL to download */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>Note::</strong> The event is the same for <a href="#fetchstart"><code>fetch::start</code></a>.</p><h2 id="traversedown"><a href="#traversedown" class="headerlink" title="traverse::down"></a><code>traverse::down</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> is traversing and starts visiting the children of a node.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> ITraverseDown &#123;</div><div class="line">    <span class="comment">/** The URL of the target. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="traverseend"><a href="#traverseend" class="headerlink" title="traverse::end"></a><code>traverse::end</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has finished traversing the DOM entirely.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> ITraverseEnd &#123;</div><div class="line">    <span class="comment">/** The URL of the target. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="traversestart"><a href="#traversestart" class="headerlink" title="traverse::start"></a><code>traverse::start</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> is going to start traversing the DOM.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> ITraverseStart &#123;</div><div class="line">    <span class="comment">/** The URL of the target. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="traverseup"><a href="#traverseup" class="headerlink" title="traverse::up"></a><code>traverse::up</code></h2><p>Event is emitted <strong>when</strong> the <code>collector</code> has finsihed visting the children of a node and goes to the next one.</p><p><strong>Format:</strong></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">interface</span> ITraverseUp &#123;</div><div class="line">    <span class="comment">/** The URL of the target. */</span></div><div class="line">    resource: <span class="built_in">string</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><div class="module module--secondary table-of-contents treeview" role="navigation"><ul role="tree" aria-labelledby="page-heading" tabindex="0"><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="true"><div class="toc-section-title--active"><span class="text">collectors</span> <span class="icon"></span></div><ul role="group"><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/developer-guide/collectors/index.html">How to develop a collector</a></div></li><li role="treeitem" aria-selected="true"><div class="toc-subsection-title--active" aria-current="location"><a class="text" href="/docs/developer-guide/collectors/events.html">Events</a></div></li></ul></li><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class="toc-section-title"><span class="text">formatters</span> <span class="icon"></span></div><ul role="group"><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/developer-guide/formatters/index.html" tabindex="-1">How to develop a formatter</a></div></li></ul></li><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class="toc-section-title"><span class="text">rules</span> <span class="icon"></span></div><ul role="group"><li role="treeitem"><div class="toc-subsection-title"><a class="text" href="/docs/developer-guide/rules/index.html" tabindex="-1">How to develop a rule</a></div></li></ul></li></ul></div></div></section></article></main><footer class="footer footer--home"><div class="footer-nav container"><div class="footer-nav__item"><p class="category">Documentation</p><ul><li><a href="/docs/developer-guide/">Developer Guide</a></li><li><a href="/docs/user-guide/rules/">Rules</a></li><li><a href="/docs/user-guide/">User Guide</a></li></ul></div><div class="footer-nav__item"><p class="category">About</p><ul><li><a href="/about/faq.html">FAQ</a></li><li><a href="/about/changelog.html">Changelog</a></li><li><a href="/about/governance.html">Governance</a></li><li><a href="/about/contributors.html">Contributors</a></li><li><a href="/about/code_of_conduct.html">Code of Conduct</a></li></ul></div><ul class="footer-nav__item social-list"><li class="github-icon"><a href="https://github.com/sonarwhal" aria-label="Follow Sonar on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path class="github-icon-svg" d="M12.5.4C5.7.4.2 5.9.2 12.7c0 5.4 3.5 10 8.4 11.7.6.1.8-.3.8-.6v-2.1C6 22.4 5.3 20 5.3 20c-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.6-1.4-5.6-6.1 0-1.3.5-2.4 1.3-3.3-.2-.4-.6-1.6 0-3.3 0 0 1-.3 3.4 1.3 1-.3 2-.4 3.1-.4 1 0 2.1.1 3.1.4C17.9 5.2 19 5.5 19 5.5c.7 1.7.2 2.9.1 3.3.8.9 1.3 2 1.3 3.3 0 4.7-2.9 5.8-5.6 6.1.4.4.8 1.1.8 2.3v3.4c0 .3.2.7.8.6 4.9-1.6 8.4-6.2 8.4-11.7C24.8 5.9 19.3.4 12.5.4"/></svg></a></li><li class="twitter-icon"><a href="https://twitter.com/narwhalnellie" aria-label="Follow Sonar on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 24"><path class="twitter-icon-svg" d="M25 4.4c-.9.4-1.9.7-2.9.8 1-.6 1.8-1.6 2.2-2.8-1 .6-2.1 1-3.2 1.2-.9-1-2.2-1.6-3.7-1.6-2.8 0-5 2.3-5 5 0 .4 0 .8.1 1.2C8.3 8 4.6 6 2.1 2.9c-.4.8-.7 1.6-.7 2.6 0 1.8.9 3.3 2.2 4.2-.8-.1-1.5-.3-2.2-.7v.1c0 2.4 1.7 4.5 4.1 5-.4.1-.9.2-1.3.2-.3 0-.6 0-.9-.1.6 2 2.5 3.5 4.7 3.5-1.9 1.3-4 2.1-6.4 2.1-.4 0-.8 0-1.2-.1C2.6 21.2 5.3 22 8.1 22c9.3 0 14.4-7.7 14.4-14.4v-.7c1-.6 1.8-1.5 2.5-2.5"/></svg></a></li></ul></div></footer><script src="/js/nav.js"></script><script src="/core/scripts/form-validation.js"></script><script src="/components/accordion/accordion.js"></script><script src="/components/treeview/treeview.js"></script><script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({apiKey:"2ee58f908e6d720c4f72a9645ce0e857",indexName:"sonarwhal",inputSelector:"#search-input",appId:"0R8E5SPAFP",debug:!1})</script><script>!function(e,t,a,c,n){e.GoogleAnalyticsObject=a,e[a]||(e[a]=function(){(e[a].q=e[a].q||[]).push(arguments)}),e[a].l=+new Date,c=t.createElement("script"),n=t.scripts[0],c.src="https://www.google-analytics.com/analytics.js",n.parentNode.insertBefore(c,n)}(this,document,"ga"),ga("create","UA-101540923-1"),ga("send","pageview")</script></body></html>